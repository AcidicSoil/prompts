# Delta
Full Rebaseline mode selected for PRDv2 scope; legacy pending prompt-authoring tasks deprecated.

## Objectives
- Mirror Task-Master semantics in prompts by adding ingest adapter, superset schema, and readiness parity engine.
- Expose shared task logic over MCP stdio plus thin CLI with deterministic outputs ready for CI.
- Integrate Mastra/AI SDK presets to guarantee zero-cost or local-first operation and document Codex/Gemini client touchpoints.
- Provide optional artifact enrichment and secure logging without breaking existing workflows.

## Constraints
- Node.js >= 18 with TypeScript strict mode; rely on file I/O only, no new services.
- Deterministic outputs (<100 ms for `next_task` on 5k tasks) and portability across Windows/WSL, macOS, Linux.
- Default local providers (Ollama) with Gemini CLI fallback; stub when neither is available.
- No hard dependency on Graphviz or external providers; fallbacks must warn but not fail.

## Impacts
- Tasks 9, 13-20 marked deprecated; superseded by new PRDv2 workstream covering ingest, state engine, CLI, Mastra integration, and docs.
- Added twelve new tasks (25-36) scoped to PRDv2 deliverables with lineage pointers back to deprecated items.
- Readiness recalculated under new plan; prior prompt-authoring pipeline removed from active frontier.
- In-progress task 22 left unchanged per historical-state rule; flagged for follow-up in readiness report.

## Decisions
- Adopted Full Rebaseline due to >40% scope change and new architectural components.
- Centralized new work under single delta doc for lineage tracking and `source_doc` references.
- Reused autogenerated PRD parse as provisional baseline, offsetting IDs to preserve history.
- Deprecated legacy rate limiting and prompt authoring tasks instead of mutating completed history.

## Evidence
- {"source": ".taskmaster/docs/PRDv2.md", "date": "2025-09-21", "summary": "Defines Task-Master ingest adapter, state engine parity, MCP tools, CLI, Mastra integration, provider presets, and artifact enrichment scope."}
- {"source": "artifacts/parsed-PRDv2-tasks.json", "date": "2025-09-21", "summary": "Autogenerated tasks from PRDv2 used as baseline for new IDs."}
